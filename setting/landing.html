{% load static %}
{% load dealerfunnel_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="description" content="">
<meta name="author" content="">
<link rel="shortcut icon" type="image/ico" href="http://dealerfunnel.com/statics/images/favicon.ico" />
<title>Dealer Funnel</title>
	<link href='http://fonts.googleapis.com/css?family=Lato:400,300,700,900' rel='stylesheet' type='text/css'>

  <!-- Bootstrap core CSS -->
  <link href="{% static 'js/bootstrap/dist/css/bootstrap.css' %}" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" media="all" href="{% static 'css/dealerminer.css' %}" />

  <!-- Font Icon Packs -->
  <link href="{% static 'css/font-awesome-4.5.0/css/font-awesome.min.css' %}" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="{% static 'css/simple-line-icons/css/simple-line-icons.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'css/dealerfunnel-icons/flaticon.css' %}" />
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <![endif]-->
  <link rel="stylesheet" type="text/css" href="{% static 'js/jquery.gritter/css/jquery.gritter.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/jquery.fullcalendar/fullcalendar/fullcalendar.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/jquery.nanoscroller/nanoscroller.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/jquery.easypiechart/jquery.easy-pie-chart.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/bootstrap.switch/bootstrap-switch.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/bootstrap.datetimepicker/css/bootstrap-datetimepicker.min.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/jquery.select2/select2.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/jquery.datatables/bootstrap-adapter/css/datatables.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/bootstrap.slider/css/slider.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/intro.js/introjs.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/bootstrap-colorpicker/dist/css/bootstrap-colorpicker.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/bootstrap.timepicker/bootstrap-timepicker.min.css' %}" />
  <!-- Custom styles for this template -->
  <link rel="stylesheet" type="text/css" media="all" href="{% static 'css/showLoading.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/jquery.timeline/css/component.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'css/jasny-bootstrap.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'js/bootstrap.multiselect/css/multi-select.css' %}">
  
  <link rel="stylesheet" type="text/css" href="{% static 'js/colorpicker/css/colorpicker.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/morris.css' %}">
 	<link rel="stylesheet" type="text/css" href="{% static 'js/timepicker-1.3.2/jquery.timepicker.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}" />
</head>
<body>

  <!-- Fixed navbar -->
  <div id="head-nav" class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="fa fa-gear"></span>
        </button>
        <a class="navbar-brand" href="index.html"><strong>Dealer</strong>Funnel</a>
      </div>
      <div class="navbar-collapse collapse">
        
        <ul class="nav navbar-nav navbar-right user-nav">
          <li class="dropdown profile_menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
	            <span class="toolbar-avatar">
	            	<img src="{{local.user.image}}" alt=""/>
	            </span>
	            <span>{{local.user.name}}</span> 
	            <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><a href="{% url 'setting_account' %}"><i class="icon-settings"></i> Settings</a></li>
              <li class="divider"></li>
              <li><a href="{% url 'logout' %}"><i class="icon-logout"></i> Sign Out</a></li>
            </ul>
          </li>
        </ul>     

      </div><!--/.nav-collapse animate-collapse -->
    </div>
  </div>

	<div id="cl-wrapper" class="fixed-menu">
	<ul class="funnel-mainnav">
    <li {% if menu.base == 'DASHBOARD' %}  class="active" {% endif %} >
	    <a href="{% url 'dashboard_landing' %}">
		    <i class="icon-speedometer"></i> 
		    <span>Dashboard</span>
	    </a>
    </li>
    <li {% if menu.base == 'CAMPAIGN' %}  class="active" {% endif %} >
	    <a href="{% url 'campaign_landing' %}">
		    <i class="icon-folder"></i> 
		    <span>Campaigns</span>
	    </a>
    </li>
    <li {% if menu.base == 'CUSTOMER' %}  class="active" {% endif %} >
	    <a href="{% url 'customer_landing' %}">
	    	<i class="icon-user"></i> 
	    	<span>Customers</span>
	    </a>
    </li>
    <li>
    	<a href="{% url 'leads_landing' %}">
    		<i class="icon-star"></i> 
    		<span>Leads</span> 
    	</a>
    </li>
    <li >
    	<a href="{% url 'appointment_landing' %}">
    		<i class="icon-clock"></i> 
    		<span>Appointments</span> 
    	</a>
    </li>
    <li {% if menu.base == 'HISTORICAL' %}  class="active" {% endif %} >
     	<a href="{% url 'reports_historical' %}">
     		<i class="icon-reload"></i>  
     		<span>Historical</span>
     	</a>
    </li>

    <li {% if menu.base == 'MARKETANALYSIS' %}  class="active" {% endif %}>
    	<a href="{% url 'reports_marketanalysis' %}">
    		<i class="icon-graph"></i>  
    		<span>Market Analysis</span>
    	</a>
    </li>
    <li {% if menu.base == 'ROI' %}  class="active" {% endif %}>
    	<a href="{% url 'reports_roi' %}">
    		<i class="icon-pie-chart"></i>  
    		<span>ROI</span>
    	</a>
    </li>
    {% if userinfo.type = 1 %}
   	<li {% if menu.base == 'DEALERSHIP' %}  class="active" {% endif %} >
   		<a href="{% url 'dealership_landing' %}">
   			<i class="flaticon-business-bag"></i>  
   			<span>Dealerships</span>
   		</a>
   	</li>
   	<li {% if menu.base == 'USER' %}  class="active" {% endif %} >
   		<a href="{% url 'user_landing' %}">
   			<i class="icon-user"></i>  
   			<span>Users</span>
   		</a>
   	</li>
  {% endif %}
  </ul>
		</div>
  

	   <div class="container-fluid" id="pcont">

      <div class="page-head ">
        <div class="row">
          <div class="col-sm-6">
            <h2>Profile & Account Settings</h2>
            <ol class="breadcrumb">
              <li><a href="#">Home</a></li>
              <li class="active">Profile and Account Setting</li>
            </ol>
          </div>
        </div>
      </div>
		  <div class="cl-mcont">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-profile" data-toggle="tab"><i class="icon-user"></i> Profile</a></li>
            <li><a href="#tab-setting" data-toggle="tab"><i class="icon-settings"></i> Settings</a></li>
          </ul>

        </div>
          <div class="tab-content">
            <div class="tab-pane active" id="tab-profile">
              <div class="row">
                <div class="col-sm-6">
                  <form enctype="multipart/form-data" id="profile_form" method="post" action="{% url 'setting_profile_update' %}" class="form-horizontal">
                    {% csrf_token %}
                    <div class="form-group">
                      <label class="control-label col-sm-3">Name</label>
                      <div class="col-sm-9">
                        <input id="cname" required name="name" value="{{local.user.name}}" type="text" class="form-control">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-sm-3">Title</label>
                      <div class="col-sm-9">
                        <input name="title" value="{{local.user.title}}" type="text" class="form-control">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-sm-3">Office Number</label>
                      <div class="col-sm-9">
                        <input name="phone" id="officenumber" value="{{local.user.phone|phone_formate:'0'}}" type="text" class="form-control">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-sm-3">Cell Number</label>
                      <div class="col-sm-9">
                        <input name="cellphone" id="cellnumber" value="{{local.user.cellphone|phone_formate:'0'}}" type="text" class="form-control">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-sm-3">Profile Picture</label>
                      <div class="col-sm-9">
                        <div class="fileinput fileinput-new" data-provides="fileinput">
												  <div class="fileinput-new thumbnail" style="width: 120px; height: 120px;">
												    <img src="http://placehold.it/150x150" alt="...">
												  </div>
												  <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div>
												  <div>
												    <span class="btn btn-default btn-file"><span class="fileinput-new">Select image</span><span class="fileinput-exists">Change</span><input type="file" name="..."></span>
												    <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
												  </div>
												</div>
                      </div>
                    </div>
                    <div class="form-action text-right">
                      <button onclick="saveprofile()" type="submit" class="btn btn-primary">Save</button>
                    </div>
                    <input value="{{local.user.id}}" type="hidden" name="userid"/>
                  </form> 
                </div>
              </div>
            </div>


            <div class="tab-pane" id="tab-setting">
              <div class="row">
                <div class="col-sm-6">
                  <form method="post" action="{% url 'setting_account_update' %}" id="setting_form" class="form-horizontal">
                    {% csrf_token %}
                    <div class="form-group">
                      <label class="control-label col-sm-3">Email</label>
                      <div class="col-sm-9">
                        <input id="cemail" name="email" required value="{{local.user.email}}" type="text" class="form-control">
                        <span id="eemail" style="display:none" ><label for="Name" generated="true" class="error">Email address already Used.Please choose another</label></span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-sm-3">Password</label>
                      <div class="col-sm-9">
                        <input value="{{local.user.password}}" id="cpassword" name="password" required type="password" class="form-control">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-sm-3">Confirm Password</label>
                      <div class="col-sm-9">
                        <input value="{{local.user.password}}" id="ccpass" required name="cpass" type="password" class="form-control">
                      </div>
                    </div>
                    <div class="text-right">
                      <button onclick="updateaccount()" type="button" class="btn btn-primary">Save</button>
                    </div>
                    <input value="{{local.user.id}}" type="hidden" id="userid" name="userid"/>
                  </form>
                </div>
              </div>
            </div>
          </div>
		  </div>
		</div> 
		
	</div>

<!-- Common Js -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script type="text/javascript" src="{% static 'js/jquery.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.gritter/js/jquery.gritter.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.nanoscroller/jquery.nanoscroller.js' %}"></script>
<script src="{% static 'js/jquery.ui/jquery-ui.js' %}" type="text/javascript"></script>
<script type="text/javascript" src="{% static 'js/jquery.sparkline/jquery.sparkline.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.easypiechart/jquery.easy-pie-chart.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.nestable/jquery.nestable.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap.switch/bootstrap-switch.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.fullcalendar/fullcalendar/fullcalendar.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap-modal.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap.datetimepicker/js/bootstrap-datetimepicker.min.js' %}"></script>
<script src="{% static 'js/jquery.select2/select2.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/skycons/skycons.js' %}" type="text/javascript"></script>
<script src="{% static 'js/bootstrap.slider/js/bootstrap-slider.js' %}" type="text/javascript"></script>
<script type="text/javascript" src="{% static 'js/jquery.datatables/jquery.datatables.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/colorpicker/js/colorpicker.js' %}"></script>

<script src="http://cdn.oesmith.co.uk/morris-0.4.1.min.js"></script>
<!--
<script type="text/javascript" src="{% static 'js/jquery.flot/jquery.flot.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.flot/jquery.flot.pie.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.flot/jquery.flot.time.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.flot/jquery.flot.resize.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.flot/jquery.flot.labels.js' %}"></script>-->
<script type="text/javascript" src="{% static 'js/daterangepicker/moment.js' %}"></script>
<script type="text/javascript" src="{% static 'js/daterangepicker/daterangepicker.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap.timepicker/bootstrap-timepicker.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.maskedinput/jquery.maskedinput.js' %}"></script>

<script type="text/javascript" src="{% static 'js/bootstrap.multiselect/js/jquery.multi-select.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.icheck/icheck.min.js' %}"></script>
<script src="{% static 'js/bootstrap.slider/js/bootstrap-slider.js' %}" type="text/javascript"></script>
<script type="text/javascript" src="{% static 'js/jquery.timeago.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.showLoading.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootbox/bootbox.min.js' %}"></script>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script type="text/javascript" src="{% static 'js/jquery.validate.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jshashtable.js' %}"></script>
<script type="text/javascript" src="{% static 'js/numberformatter.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jasny-bootstrap.js' %}"></script>
<script type="text/javascript" src="{% static 'js/angular.js' %}"></script>
<script type="text/javascript" src="{% static 'js/timepicker-1.3.2/jquery.timepicker.js' %}"></script>
<script type="text/javascript" src="{% static 'js/audiojs/audio.min.js' %}"></script>

<script type="text/javascript" src="{% static 'js/behaviour/general.js' %}"></script>
<script type="text/javascript" src="{% static 'js/main-scripts.js' %}"></script>
 <script type="text/javascript">
    function updateaccount()
    {
        var email = $('#cemail').val();
	    var userid = $('#userid').val();
	    if (email == '') 
	    {
	       $('#setting_form').submit();
	    }
	    else
	    {
		    $('#tab-setting').showLoading();
		    $.getJSON("{% url 'json_check_useremail' %}",{email:email,userid:userid}, function( data ) {
		    	$('#tab-setting').hideLoading();
		    	if (data.isemail == 1)
		    	{
		    	   $('#eemail').show();
		    	}
		    	else
		    	{
		    	   $('#eemail').hide();
		    	   $('#setting_form').submit();
		    	}
		    	
		    });
        }
    }
    function saveprofile()
    {
       $('#profile_form').submit();
    }
    $(document).ready(function(){
      $("#setting_form").validate();
      $("#profile_form").validate();
      $('#officenumber').mask("999 999 9999");
      $('#cellnumber').mask("999 999 9999");
      $('.datatable').DataTable( {
        initComplete: function () {
          var api = this.api();

          api.columns().indexes().flatten().each( function ( i ) {
            var column = api.column( i );
            var select = $('<select><option value=""></option></select>')
              .appendTo( $(column.footer()).empty() )
              .on( 'change', function () {
                var val = $.fn.dataTable.util.escapeRegex(
                  $(this).val()
                );

                column
                  .search( val ? '^'+val+'$' : '', true, false )
                  .draw();
              } );

            column.data().unique().sort().each( function ( d, j ) {
              select.append( '<option value="'+d+'">'+d+'</option>' )
            } );
          } );
        }
      } );

        //Search input style
      $('.dataTables_filter input').addClass('form-control').attr('placeholder','Search');
      $('.dataTables_length select').addClass('form-control'); 
      $('.dataTables_length').hide();  
      //initialize the javascript

      audiojs.events.ready(function() {
        var as = audiojs.createAll();
      });
      // Datepicker
      $('.datepicker').datepicker();
    });
  </script>
  <script type="text/javascript">
    var selectAll = function () {
      $('.leads-list-data input:not(:checked)').click();

    }, toggleSelection = function () {
      $checked = $('.leads-list-data input:checked');
      $('.leads-list-data input:not(:checked)').click();
      $checked.click();

    }, unselectAll = function () {
      $('.leads-list-data input:checked').click();

    }, markAsRead = function () {
      $('.leads-list-data input:checked').parents('.message').removeClass('unread');

    }, markAsUnread = function () {
      $('.leads-list-data input:checked').parents('.message').addClass('unread');

    }, deleteMessages = function () {
      $('.leads-list-data input:checked').parents('.message').remove();
      
    };
  </script>
  <script src="{% static 'js/bootstrap/dist/js/bootstrap.min.js' %}"></script>

  </body>
</html>
